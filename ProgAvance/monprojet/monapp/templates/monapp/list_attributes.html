{% extends 'monapp/base.html' %}
{% block title %}
Mon application DJANGO
{% endblock %}
{% block menu %}
<h1>Liste des ATTRIBUTES</h1>
{% endblock %}
{% block contenu %}

<!-- Barre de recherche -->
<p class="lead mb-3 ml-0">Rechercher un élément...</p>
<form method="GET" action="">
    <input class="form-control" type="text" name="search" placeholder="Tapez ici votre recherche"
    value="{{ request.GET.search }}">
    <button type="submit" class="btn btn-success mt-2">Rechercher</button>
</form>

<table class="table">
<thead>
<th>Nom</th>
<th>Valeurs</th>
<th>Position</th>
{% if user.is_superuser %}
    <th>Modifier</th>
    <th>Supprimer</th>
{% endif %}
</thead>
<tbody>
{% for attribute in productattributes %}
<tr>
<td><a href="{% url 'attribute-detail' attribute.id %}" class="btn btn-primary mt-2">{{ attribute.name}}</a></td>
<td style="padding: 0.5rem 0 !important;">
    {% for value in attribute.productattributevalue_set.all %}
    <p>{{ value.value }}</p>
    {% if not forloop.last %}
        <hr>
    {% endif %}
    {% empty %}
    <p>Aucune valeur</p>
    {% endfor %}
</td>
<td style="padding: 0.5rem 0 !important;">
    {% for value in attribute.productattributevalue_set.all %}
    <p>{{ value.position }}</p>
    {% if not forloop.last %}
        <hr>
    {% endif %}
    {% empty %}
    <p>Aucune valeur</p>
    {% endfor %}
</td>
{% if user.is_superuser %}
    <td><a href="{% url 'attribute-update' attribute.id %}" class="btn btn-warning mt-2">Modifier</a></td>
    <td><a href="{% url 'attribute-delete' attribute.id %}" class="btn btn-danger mt-2">Supprimer</a></td>
{% endif %}
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}